{% extends "base.html" %} {% block main %}

<div class="full-background profile">

	<div class="profile-container">
		<div class="step" {{ 'style=display:none;' if not is_new else ""}}>{{ lang['step']}} 1/3</div>
		<div class="profile-logo"></div>
		
		<div class="">	
			{% if is_new %} <div class="center-text">{{ lang['profile_intro']}} </div> {% else %}
			<div class="center-text">{{ lang['profile_edit_intro']}} </div> {% endif %}
	
			<form action="/profile/edit" method="post">
				<input type="hidden" name="new" value="{{ 'true' if is_new else 'false' }}"/>
				{% if not is_new %}
				<div>
					<label class="form-label">{{ lang['first_name']}}: </label>
					<div class="form-input"><input type="text" name="first_name"
						value="{{user.first_name|e}}" readonly>
					</div>
				</div>
				<div>
					<label class="form-label">{{ lang['last_name']}}: </label>
					<div class="form-input"><input type="text" name="last_name"
						value="{{user.last_name|e}}" readonly>
					</div>
				</div>
				{% endif %}
				<div>
					<label class="form-label">{{ lang['home_city']}}: </label>
					{% if user.home %}
					<div class="form-input">
						<input type="text" name="auto-city"
							id="city" value="{{user.home.city}}, {{user.home.province}} ({{user.home.country}})">
						<input type="hidden" name="locality" id="locality" value="{{user.home.city}}"/> 
						<input type="hidden" name="administrative_area_level_2" id="administrative_area_level_2" value="{{user.home.province}}"/> 
						<input type="hidden" name="country" id="country" value="{{user.home.country}}"/>
					</div>
					{% else %}
					<div class="form-input">
						<input type="text" name="auto-city"
							id="city" >
						<input type="hidden" name="locality" id="locality" /> 
						<input type="hidden" name="administrative_area_level_2" id="administrative_area_level_2" /> 
						<input type="hidden" name="country" id="country"/>
					</div>
					{% endif %}
				</div>
				{% if not is_new %}
				<div>
					<label class="form-label">{{ lang['gender']}}: </label> 
					<div class="form-input" style="margin-left: 10px;">
						<label class="radio-inline"> <input
							type="radio" name="gender" value="M" {{"checked" if user.gender and user.gender == 'M' else ""}} > M
						</label> 
						<label class="radio-inline"> <input type="radio"
							name="gender" value="F" {{"checked" if user.gender and user.gender == 'F' else ""}}> F
						</label>
					</div>
				</div>
				<div>
					<label class="form-label">{{ lang['age']}}: </label>
					<div class="form-input">
						<div class="radio">
							<label > <input type="radio" name="age" value="<18" {{"checked" if user.age and user.age == "<18" else ""}} >
								{{ lang['<18_years']}}
							</label>
						</div>
						<div class="radio">
							<label > <input type="radio" name="age" value="18-25" {{"checked" if user.age and user.age == "18-25" else ""}} >
								18 - 25 {{ lang['years_old']}}
							</label>
						</div>
						<div class="radio">
							<label > <input type="radio" name="age" value="26-35" {{"checked" if user.age and user.age == "26-35" else ""}}>
								26 - 35 {{ lang['years_old']}}
							</label>	
						</div>
						<div class="radio">
							<label > <input type="radio" name="age" value="36-55" {{"checked" if user.age and user.age == "36-55" else ""}}>
								36 - 55 {{ lang['years_old']}}
							</label>
						</div>
						<div class="radio">
							<label > <input type="radio" name="age" value=">55" {{"checked" if user.age and user.age == ">55" else ""}}>
								{{ lang['>55_years']}}
							</label>
						</div>
					</div>
				</div>
				{% endif %}
				<input type="submit" class="img-btn save " value="{{ lang['save']}}" />
			</form>
		</div>
	</div>

</div>


{% endblock %} {% block scripts %}
<script type="text/javascript"
	src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>
<script type="text/javascript">


	$(window)
			.load(
					function() {
						
						
						
						var input = document.getElementById('city');
						var options = {
							types : [ '(cities)' ]
						};
						var autocomplete = new google.maps.places.Autocomplete(
								input, options);

						var componentForm = {
							locality : 'long_name',
							administrative_area_level_2 : 'short_name',
							country : 'short_name',
						};

						google.maps.event.addListener(autocomplete,
								'place_changed', function() {
									fillInAddress();
								});

						function fillInAddress() {
							// Get the place details from the autocomplete object.
							var place = autocomplete.getPlace();
							
							// Get each component of the address from the place details
							// and fill the corresponding field on the form.
							for (var i = 0; i < place.address_components.length; i++) {
								var addressType = place.address_components[i].types[0];
								if (componentForm[addressType]) {
									var val = place.address_components[i][componentForm[addressType]];
									document.getElementById(addressType).value = val;
								}
							}
						}
					});
</script>

{% endblock %}

